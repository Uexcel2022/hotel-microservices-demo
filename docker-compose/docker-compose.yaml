services:
  redis:
    image: redis
    ports:
      - "6379:6379"
    healthcheck:
      test: [ "CMD-SHELL","redis-cli ping|grep PONG" ]
      timeout: 10s
      retries: 10
    extends:
      file: common-config.yaml
      service: network-deploy-service

  gatewayserver:
    extends:
      file: gatewayserver.yaml
      service: gatewayserver
#-----------------------------------------------------------------
  eurekaserver:
    extends:
      file: "eurekaserver.yaml"
      service: "eureka"

#----------------------------------------------------------------
  apartmentDB:
    extends:
      file: DBServices.yaml
      service: apartmentDB
  apartment:
    depends_on:
      apartmentDB:
        condition: service_healthy
      eurekaserver:
        condition: service_healthy
    extends:
      file: apartment.yaml
      service: apartment
#----------------------------------------------------------------------
  executiveDB:
    extends:
      file: DBServices.yaml
      service: executiveDB
  executive:
    depends_on:
      executiveDB:
        condition: service_healthy
      eurekaserver:
        condition: service_healthy
    extends:
      file: executive.yaml
      service: executive
#-------------------------------------------------------------------------
  regularDB:
    extends:
      file: DBServices.yaml
      service: regularDB
  regular:
    depends_on:
      regularDB:
        condition: service_healthy
      eurekaserver:
        condition: service_healthy
    extends:
      file: regular.yaml
      service: regular
#--------------------------------------------------------------------
networks:
  hotel:
    driver: "bridge"
